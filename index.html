<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Construction Connection Reusability Assessment Tool - Evaluate sustainability and reusability potential of construction connections">
    <meta name="keywords" content="construction, reusability, assessment, sustainability, connections, design for disassembly">
    <title>Construction Connection Reusability Assessment</title>
    <style>
/* Construction Connection Reusability Assessment - Complete CSS */

/* Reset and Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    color: #333;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
}

/* Container */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

/* Header */
.header {
    text-align: center;
    color: white;
    margin-bottom: 30px;
}

.header h1 {
    font-size: 2.5em;
    margin-bottom: 10px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}

.header p {
    font-size: 1.2em;
    opacity: 0.9;
}

/* Navigation Tabs */
.nav-tabs {
    display: flex;
    background: rgba(255,255,255,0.1);
    border-radius: 10px;
    margin-bottom: 30px;
    backdrop-filter: blur(10px);
}

.nav-tab {
    flex: 1;
    padding: 15px;
    text-align: center;
    background: none;
    border: none;
    color: white;
    font-size: 1.1em;
    cursor: pointer;
    transition: all 0.3s ease;
    border-radius: 10px;
}

.nav-tab.active {
    background: rgba(255,255,255,0.2);
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.nav-tab:hover {
    background: rgba(255,255,255,0.15);
}

/* Content */
.content {
    background: white;
    border-radius: 15px;
    padding: 30px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    backdrop-filter: blur(10px);
    min-height: 600px;
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
}

/* Welcome Section */
.welcome-section {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    color: white;
    padding: 30px;
    border-radius: 15px;
    margin-bottom: 30px;
    text-align: center;
}

.welcome-section h2 {
    margin-bottom: 15px;
    font-size: 1.8em;
}

.welcome-section p {
    font-size: 1.1em;
    margin: 15px 0;
}

.parameters-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 10px;
    margin: 20px 0;
    text-align: left;
}

.parameters-grid div {
    padding: 8px;
    background: rgba(255,255,255,0.1);
    border-radius: 5px;
    font-size: 0.95em;
}

/* Form Sections */
.form-section {
    margin-bottom: 30px;
    padding: 20px;
    border: 2px solid #e0e0e0;
    border-radius: 10px;
    background: #f9f9f9;
}

.form-section h3 {
    color: #667eea;
    margin-bottom: 15px;
    border-bottom: 2px solid #667eea;
    padding-bottom: 5px;
    font-size: 1.4em;
}

.section-description {
    margin-bottom: 20px;
    color: #666;
    font-style: italic;
    background: #fff;
    padding: 15px;
    border-radius: 8px;
    border-left: 4px solid #667eea;
}

/* Subsections */
.subsection {
    background: white;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 20px;
    border: 1px solid #ddd;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}

.geometry-section {
    background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%);
    border-left: 4px solid #4facfe;
}

.material-section {
    background: linear-gradient(135deg, #fff8e1 0%, #fff3c4 100%);
    border-left: 4px solid #ffb74d;
}

.reinforcement-section {
    background: linear-gradient(135deg, #fce4ec 0%, #f8bbd9 100%);
    border-left: 4px solid #e91e63;
}

.prefab-section {
    background: linear-gradient(135deg, #f0f8ff 0%, #e1f5fe 100%);
    border-left: 4px solid #03a9f4;
}

.tool-section {
    background: linear-gradient(135deg, #fff8e1 0%, #fff3c4 100%);
    border-left: 4px solid #ff9800;
}

.connection-section {
    background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
    border-left: 4px solid #9c27b0;
}

.sub-params-section {
    background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
    border-left: 4px solid #4caf50;
}

.tool-props-section {
    background: linear-gradient(135deg, #e1f5fe 0%, #b3e5fc 100%);
    border-left: 4px solid #00bcd4;
}

.subsection h4 {
    margin-bottom: 15px;
    color: #667eea;
    font-size: 1.2em;
    display: flex;
    align-items: center;
    gap: 10px;
}

/* Form Groups */
.form-group {
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 15px;
}

.form-group label {
    min-width: 200px;
    font-weight: 500;
    color: #555;
}

.form-group input, 
.form-group select {
    padding: 10px;
    border: 2px solid #ddd;
    border-radius: 5px;
    font-size: 1em;
    min-width: 150px;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

.form-group input:focus, 
.form-group select:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 5px rgba(102, 126, 234, 0.3);
}

.result-display {
    background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
    padding: 10px;
    border-radius: 5px;
    margin-top: 15px;
    border: 1px solid #4caf50;
}

.result-display label {
    font-weight: bold;
    color: #2e7d32;
}

.result-display span {
    font-weight: bold;
    color: #2e7d32;
    font-size: 1.1em;
}

/* Tool Grid */
.tool-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 15px;
    margin-top: 15px;
}

.tool-item {
    border: 2px solid #ddd;
    border-radius: 8px;
    padding: 15px;
    background: white;
    transition: all 0.3s ease;
    cursor: pointer;
    position: relative;
    overflow: hidden;
}

.tool-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 2px;
    background: linear-gradient(90deg, #667eea, #764ba2);
    transition: left 0.3s ease;
}

.tool-item:hover {
    border-color: #bbb;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.tool-item:hover::before {
    left: 0;
}

.tool-item.selected {
    border-color: #667eea;
    background: linear-gradient(135deg, #f8f9ff 0%, #f0f4ff 100%);
    box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
}

.tool-item.selected::before {
    left: 0;
}

.tool-header {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
}

.tool-header input[type="checkbox"] {
    margin-right: 10px;
    transform: scale(1.2);
    accent-color: #667eea;
}

.tool-header label {
    font-weight: bold;
    cursor: pointer;
    flex: 1;
    color: #333;
}

.tool-properties {
    font-size: 0.85em;
    color: #666;
    margin-bottom: 10px;
    padding: 8px;
    background: #f8f9fa;
    border-radius: 4px;
    border-left: 3px solid #667eea;
}

.time-input {
    background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%);
    padding: 10px;
    border-radius: 5px;
    margin-top: 10px;
    border: 1px solid #ddd;
}

.time-input label {
    display: block;
    font-size: 0.9em;
    margin-bottom: 5px;
    font-weight: 500;
    color: #555;
}

.time-input input {
    width: 100%;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 3px;
    box-sizing: border-box;
    font-size: 0.95em;
}

.tool-instruction {
    margin-bottom: 15px;
    color: #666;
    font-size: 0.9em;
    padding: 10px;
    background: #f8f9fa;
    border-radius: 5px;
    border-left: 4px solid #17a2b8;
}

/* Buttons */
.button-container {
    text-align: center;
    margin: 20px 0;
}

.calculate-btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    padding: 15px 40px;
    font-size: 1.1em;
    border-radius: 8px;
    cursor: pointer;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.calculate-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

.calculate-btn:active {
    transform: translateY(0);
}

/* Results */
.results {
    margin-top: 30px;
    padding: 20px;
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    border-radius: 10px;
    color: white;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.results h4 {
    margin-bottom: 15px;
    font-size: 1.3em;
}

.score-display {
    font-size: 1.8em;
    font-weight: bold;
    text-align: center;
    margin: 20px 0;
    padding: 15px;
    background: rgba(255,255,255,0.1);
    border-radius: 8px;
    backdrop-filter: blur(10px);
}

.result-details {
    margin-top: 15px;
    font-size: 0.9em;
    background: rgba(255,255,255,0.1);
    padding: 15px;
    border-radius: 8px;
    backdrop-filter: blur(10px);
}

.result-details div {
    margin-bottom: 5px;
}

.result-details strong {
    color: #fff;
}

/* Tool Property Items */
.tool-property-item {
    margin-bottom: 15px;
    padding: 10px;
    background: rgba(255,255,255,0.1);
    border-radius: 5px;
    border-left: 3px solid #fff;
}

.tool-property-item strong {
    display: block;
    margin-bottom: 5px;
    font-size: 1.05em;
}

/* Utility Classes */
.hidden {
    display: none !important;
}

/* Placeholder Section */
.placeholder-section {
    background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
    border: 2px dashed #ccc;
    text-align: center;
    padding: 40px;
    color: #999;
    border-radius: 10px;
}

.placeholder-section h3 {
    color: #666 !important;
    border-bottom: none !important;
    margin-bottom: 10px;
}

/* Explanation Content */
.explanation-content {
    line-height: 1.8;
    max-width: 800px;
    margin: 0 auto;
}

.explanation-content h2 {
    color: #667eea;
    margin: 30px 0 15px 0;
    border-left: 4px solid #667eea;
    padding-left: 15px;
    font-size: 1.8em;
}

.explanation-content h3 {
    color: #764ba2;
    margin: 20px 0 10px 0;
    font-size: 1.3em;
}

.explanation-content ul {
    margin: 10px 0;
    padding-left: 20px;
}

.explanation-content li {
    margin: 8px 0;
    color: #555;
}

.explanation-content li strong {
    color: #333;
}

.formula {
    background: linear-gradient(135deg, #f0f0f0 0%, #e8e8e8 100%);
    padding: 15px;
    border-radius: 5px;
    font-family: 'Courier New', monospace;
    margin: 15px 0;
    border-left: 4px solid #667eea;
    font-size: 1.1em;
    color: #333;
}

/* Responsive Design */
@media (max-width: 768px) {
    .container {
        padding: 10px;
    }

    .header h1 {
        font-size: 2em;
    }

    .header p {
        font-size: 1em;
    }

    .nav-tabs {
        flex-direction: column;
    }

    .nav-tab {
        margin-bottom: 5px;
    }

    .content {
        padding: 20px;
    }

    .form-group {
        flex-direction: column;
        align-items: flex-start;
    }

    .form-group label {
        min-width: auto;
        margin-bottom: 5px;
    }

    .form-group input,
    .form-group select {
        width: 100%;
        min-width: auto;
    }

    .tool-grid {
        grid-template-columns: 1fr;
    }

    .parameters-grid {
        grid-template-columns: 1fr;
    }

    .welcome-section {
        padding: 20px;
    }

    .form-section {
        padding: 15px;
    }

    .subsection {
        padding: 10px;
    }

    .calculate-btn {
        padding: 12px 30px;
        font-size: 1em;
    }

    .score-display {
        font-size: 1.5em;
    }
}

@media (max-width: 480px) {
    .header h1 {
        font-size: 1.8em;
    }

    .welcome-section h2 {
        font-size: 1.5em;
    }

    .form-section h3 {
        font-size: 1.2em;
    }

    .subsection h4 {
        font-size: 1.1em;
    }

    .tool-item {
        padding: 10px;
    }

    .content {
        padding: 15px;
    }
}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🏗️ Construction Connection Reusability Assessment</h1>
            <p>Evaluate the reusability potential of construction connections with advanced scoring algorithms</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('calculator')">📊 Calculator</button>
            <button class="nav-tab" onclick="showTab('explanation')">📚 Explanation</button>
        </div>

        <div class="content">
            <!-- Calculator Tab -->
            <div id="calculator" class="tab-content active">
                <!-- Welcome Section -->
                <div class="welcome-section">
                    <h2>🏗️ Welcome to the Construction Connection Reusability Assessment</h2>
                    <p>This advanced framework evaluates the reusability potential of construction connections through <strong>12 main parameters</strong>:</p>
                    <div class="parameters-grid">
                        <div>• End of Cycle Waste</div>
                        <div>• Prefabrication Degree</div>
                        <div>• Damage Probability</div>
                        <div>• Ease of Disassembly</div>
                        <div>• Ease of Reassembly</div>
                        <div>• Connection Complexity</div>
                        <div>• Number of Steps and Time</div>
                        <div>• Accessibility of Connection</div>
                        <div>• Tolerance</div>
                        <div>• Size</div>
                        <div>• Structural Strength</div>
                        <div>• Design Documentation</div>
                    </div>
                    <p>Based on these parameters, the reusability score of your connection will be calculated to help optimize construction sustainability.</p>
                </div>

                <form id="assessmentForm">
                    <!-- 1. End of Cycle Waste -->
                    <div class="form-section">
                        <h3>🔄 1. End of Cycle Waste Assessment</h3>
                        <p class="section-description">This parameter assesses the amount of material that can be reused when the connection system is disassembled.</p>
                        
                        <!-- Connection Geometry -->
                        <div class="subsection geometry-section">
                            <h4>📐 Connection Geometry</h4>
                            <div class="form-group">
                                <label for="connectionType">Connection Type:</label>
                                <select id="connectionType" required onchange="updateJointArea()">
                                    <option value="">Select Connection Type</option>
                                    <option value="Column-Column">Column-Column</option>
                                    <option value="Wall-Wall Horizontal">Wall-Wall Horizontal</option>
                                    <option value="Other">Other Connections</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="length">Length (cm):</label>
                                <input type="number" id="length" min="0" step="0.1" required onchange="updateJointArea()">
                            </div>
                            <div class="form-group">
                                <label for="width">Width (cm):</label>
                                <input type="number" id="width" min="0" step="0.1" required onchange="updateJointArea()">
                            </div>
                            <div class="form-group" id="heightGroup" style="display: none;">
                                <label for="height">Height (cm):</label>
                                <input type="number" id="height" min="0" step="0.1" onchange="updateJointArea()">
                            </div>
                            <div class="form-group result-display">
                                <label>Joint Area:</label>
                                <span id="jointAreaDisplay">-- cm²</span>
                            </div>
                        </div>

                        <!-- Material Properties -->
                        <div class="subsection material-section">
                            <h4>🧱 Material Properties</h4>
                            <div class="form-group">
                                <label for="wasteArea">Waste Area (cm²):</label>
                                <input type="number" id="wasteArea" min="0" step="0.1" required>
                            </div>
                            <div class="form-group">
                                <label for="strengthClass">Concrete Strength Class:</label>
                                <select id="strengthClass" required onchange="updateReductionFactor()">
                                    <option value="">Select Strength Class</option>
                                    <option value="C12/15">C12/15</option>
                                    <option value="C20/25">C20/25</option>
                                    <option value="C30/37">C30/37</option>
                                    <option value="C40/50">C40/50</option>
                                    <option value="C45/55">C45/55</option>
                                    <option value="C50/60">C50/60</option>
                                    <option value="C55/67">C55/67</option>
                                    <option value="C60/76">C60/76</option>
                                    <option value="C70/85">C70/85</option>
                                    <option value="C80/95">C80/95</option>
                                    <option value="C90/105">C90/105</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="mortarType">Mortar Type:</label>
                                <select id="mortarType" required onchange="updateReductionFactor()">
                                    <option value="">Select Mortar Type</option>
                                    <option value="I">Type I</option>
                                    <option value="IIIA">Type IIIA</option>
                                    <option value="IIIB">Type IIIB</option>
                                    <option value="IIIC">Type IIIC</option>
                                </select>
                            </div>
                            <div class="form-group result-display">
                                <label>Mortar Reduction Factor:</label>
                                <span id="reductionFactorDisplay">--</span>
                            </div>
                        </div>

                        <!-- Reinforcement Properties -->
                        <div class="subsection reinforcement-section">
                            <h4>🔩 Reinforcement Properties</h4>
                            <div class="form-group result-display">
                                <label>Reinforcement Type:</label>
                                <span id="reinforcementTypeDisplay">--</span>
                            </div>
                            
                            <!-- For Column-Column and Other: Number of Reinforcement -->
                            <div class="form-group" id="reinforcementNumberGroup" style="display: none;">
                                <label for="reinforcementNumber">Number of Reinforcement Bars:</label>
                                <input type="number" id="reinforcementNumber" min="0" step="1" placeholder="Enter number of bars" onchange="calculateReinforcementArea()">
                            </div>
                            
                            <!-- For Wall-Wall Horizontal: Reinforcement Length -->
                            <div class="form-group" id="reinforcementLengthGroup" style="display: none;">
                                <label for="reinforcementLength">Reinforcement Length (cm):</label>
                                <input type="number" id="reinforcementLength" min="0" step="0.1" placeholder="Enter length in cm" onchange="calculateReinforcementArea()">
                            </div>
                            
                            <!-- For Other connections: Length of reinforcement -->
                            <div class="form-group" id="reinforcementOtherLengthGroup" style="display: none;">
                                <label for="reinforcementOtherLength">Length of Reinforcement (cm):</label>
                                <input type="number" id="reinforcementOtherLength" min="0" step="0.1" placeholder="Enter length in cm" onchange="calculateReinforcementArea()">
                            </div>
                            
                            <!-- Reinforcement Diameter (for all types) -->
                            <div class="form-group" id="reinforcementDiameterGroup">
                                <label for="reinforcementDiameter">Reinforcement Diameter (mm):</label>
                                <select id="reinforcementDiameter" onchange="calculateReinforcementArea()">
                                    <option value="8">8 mm</option>
                                    <option value="12">12 mm</option>
                                    <option value="16">16 mm</option>
                                    <option value="20">20 mm</option>
                                    <option value="25">25 mm</option>
                                    <option value="32">32 mm</option>
                                    <option value="40">40 mm</option>
                                </select>
                            </div>
                            
                            <!-- No Waste Option -->
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="noReinforcementWaste" onchange="toggleNoWaste()">
                                    No reinforcement waste
                                </label>
                            </div>
                            
                            <!-- Calculated Reinforcement Area -->
                            <div class="form-group result-display">
                                <label>Reinforcement Area:</label>
                                <span id="reinforcementAreaDisplay">-- cm²</span>
                            </div>
                        </div>

                        <!-- Calculate Button and Result -->
                        <div class="button-container">
                            <button type="button" class="calculate-btn" onclick="calculateEndOfCycleWaste()">
                                🔬 Calculate End of Cycle Waste Score
                            </button>
                        </div>

                        <div id="endOfCycleResult" class="results hidden">
                            <h4>📊 End of Cycle Waste Result</h4>
                            <div class="score-display" id="endOfCycleScore">Score: --</div>
                            <div id="endOfCycleDetails" class="result-details"></div>
                        </div>
                    </div>

                    <!-- 2. Prefabrication Degree -->
                    <div class="form-section">
                        <h3>🏭 2. Prefabrication Degree Assessment</h3>
                        <p class="section-description">This parameter measures the extent to which the connection is produced in a factory.</p>
                        
                        <div class="subsection prefab-section">
                            <h4>🏗️ Prefabrication Details</h4>
                            <div class="form-group">
                                <label for="prefabricatedArea">Prefabricated Area (cm²):</label>
                                <input type="number" id="prefabricatedArea" min="0" step="0.1" required>
                            </div>
                            <div class="form-group result-display">
                                <label>Joint Area (from above):</label>
                                <span id="jointAreaDisplay2">-- cm²</span>
                            </div>
                        </div>

                        <!-- Calculate Button and Result -->
                        <div class="button-container">
                            <button type="button" class="calculate-btn" onclick="calculatePrefabricationDegree()">
                                🔬 Calculate Prefabrication Degree Score
                            </button>
                        </div>

                        <div id="prefabricationResult" class="results hidden">
                            <h4>📊 Prefabrication Degree Result</h4>
                            <div class="score-display" id="prefabricationScore">Score: --</div>
                            <div id="prefabricationDetails" class="result-details"></div>
                        </div>
                    </div>

                    <!-- Placeholder for remaining parameters -->
                    <div class="form-section placeholder-section">
                        <h3>📋 Remaining Parameters</h3>
                        <p>Additional parameters (3-12) will be added progressively as each section is completed and tested.</p>
                        <p>Next: Ease of Disassembly Assessment with tool selection and damage probability calculations.</p>
                    </div>
                </form>
            </div>

            <!-- Explanation Tab -->
            <div id="explanation" class="tab-content">
                <div class="explanation-content">
                    <h2>📚 Reusability Assessment Framework</h2>
                    
                    <p>This framework evaluates the reusability potential of construction connections through a comprehensive multi-parameter assessment system. The methodology considers technical, practical, and economic factors that influence the feasibility of connection disassembly and reassembly.</p>

                    <h2>🎯 Main Parameters</h2>

                    <h3>1. End of Cycle Waste (Weight: 2.40)</h3>
                    <p>Assesses the amount of material that can be reused when the connection system is disassembled. The score is calculated using:</p>
                    <div class="formula">
                        Score = (Reusable Area / Joint Area) × (1 / RF_material)
                    </div>
                    <p>Where RF_material is the reduction factor based on concrete strength class and mortar type.</p>

                    <h3>Joint Area Calculation</h3>
                    <ul>
                        <li><strong>Column-Column Connection:</strong> Joint Area = Length × Width</li>
                        <li><strong>Wall-Wall Horizontal Connection:</strong> Joint Area = Length × Width</li>
                        <li><strong>Other Connections:</strong> Joint Area = min(Length, Width) × Height</li>
                    </ul>

                    <h3>2. Prefabrication Degree (Weight: 1.26)</h3>
                    <p>Measures the extent to which the connection is produced in a factory:</p>
                    <div class="formula">
                        Score = Prefabricated Area / Joint Area
                    </div>

                    <h3>Material Reduction Factors</h3>
                    <p>The reduction factors account for material properties and their impact on reusability. Higher strength concrete and certain mortar types have different reusability characteristics.</p>

                    <h2>🔧 Tool Properties and Damage Assessment</h2>
                    <p>Each tool is classified based on:</p>
                    <ul>
                        <li><strong>Setup Time:</strong> Low (≤5 min), Moderate (5-20 min), High (>20 min)</li>
                        <li><strong>Skill Level:</strong> Basic, Intermediate (≤2 days training), Advanced (>2 days training)</li>
                        <li><strong>Portability:</strong> Based on weight, power source, and operational distance</li>
                        <li><strong>Damage Probability:</strong> Minor, Major, and Precision characteristics</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
// Construction Connection Reusability Assessment Calculator
// Complete JavaScript implementation

// Tool properties data with damage and precision classifications
const toolProperties = {
    "Battery Disc Saw": { 
        setupTime: "Low", 
        skillLevel: "Basic", 
        portability: "High",
        minorDamage: "Moderate",
        majorDamage: "Moderate", 
        precision: "High"
    },
    "Corded Disc Saw": { 
        setupTime: "Low", 
        skillLevel: "Basic", 
        portability: "Medium",
        minorDamage: "Moderate",
        majorDamage: "Moderate", 
        precision: "High"
    },
    "Petrol Ring Saw": { 
        setupTime: "Low", 
        skillLevel: "Intermediate", 
        portability: "High",
        minorDamage: "Moderate",
        majorDamage: "High", 
        precision: "Moderate"
    },
    "Corded Ring Saw": { 
        setupTime: "Low", 
        skillLevel: "Intermediate", 
        portability: "Medium",
        minorDamage: "Moderate",
        majorDamage: "High", 
        precision: "Moderate"
    },
    "Petrol Chain Saw": { 
        setupTime: "Low", 
        skillLevel: "Intermediate", 
        portability: "High",
        minorDamage: "Moderate",
        majorDamage: "High", 
        precision: "Low"
    },
    "Corded Chain Saw": { 
        setupTime: "Low", 
        skillLevel: "Intermediate", 
        portability: "Medium",
        minorDamage: "Moderate",
        majorDamage: "High", 
        precision: "Low"
    },
    "Walk behind floor saw": { 
        setupTime: "Low", 
        skillLevel: "Intermediate", 
        portability: "Medium",
        minorDamage: "Low",
        majorDamage: "Moderate", 
        precision: "Moderate"
    },
    "Automated Wall Saw": { 
        setupTime: "High", 
        skillLevel: "Intermediate", 
        portability: "Very Low",
        minorDamage: "Low",
        majorDamage: "Low", 
        precision: "High"
    },
    "Hydro blast": { 
        setupTime: "High", 
        skillLevel: "Advanced", 
        portability: "Low",
        minorDamage: "High",
        majorDamage: "Low", 
        precision: "Low"
    },
    "Blow torch": { 
        setupTime: "Moderate", 
        skillLevel: "Intermediate", 
        portability: "High",
        minorDamage: "Low",
        majorDamage: "Low", 
        precision: "Moderate"
    },
    "Demolition Hammer": { 
        setupTime: "Low", 
        skillLevel: "Basic", 
        portability: "Medium",
        minorDamage: "High",
        majorDamage: "Moderate", 
        precision: "Low"
    },
    "Torque Wrench": { 
        setupTime: "Low", 
        skillLevel: "Basic", 
        portability: "High",
        minorDamage: "Low",
        majorDamage: "Low", 
        precision: "High"
    },
    "Angle Grinder": { 
        setupTime: "Low", 
        skillLevel: "Basic", 
        portability: "High",
        minorDamage: "Moderate",
        majorDamage: "High", 
        precision: "Moderate"
    },
    "Hydraulic Piston": { 
        setupTime: "Low", 
        skillLevel: "Basic", 
        portability: "High",
        minorDamage: "High",
        majorDamage: "Low", 
        precision: "High"
    },
    "Welder": { 
        setupTime: "Moderate", 
        skillLevel: "Intermediate", 
        portability: "High",
        minorDamage: "Low",
        majorDamage: "Low", 
        precision: "Moderate"
    },
    "Diamond Drill": { 
        setupTime: "Low", 
        skillLevel: "Basic", 
        portability: "High",
        minorDamage: "Very High",
        majorDamage: "High", 
        precision: "Moderate"
    },
    "Impact Wrench": { 
        setupTime: "Low", 
        skillLevel: "Basic", 
        portability: "High",
        minorDamage: "Very High",
        majorDamage: "Low", 
        precision: "High"
    },
    "Rotary Hammer": { 
        setupTime: "Low", 
        skillLevel: "Intermediate", 
        portability: "High",
        minorDamage: "Very High",
        majorDamage: "Moderate", 
        precision: "Low"
    }
};

// Score mappings for ease of disassembly/reassembly
const setupTimeScores = { "Low": 1, "Moderate": 0.5, "High": 0 };
const skillLevelScores = { "Basic": 1, "Intermediate": 0.5, "Advanced": 0 };
const portabilityScores = { "High": 1, "Medium": 0.66, "Low": 0.33, "Very Low": 0 };

// Reduction factors for materials (from Table 1)
const reductionFactors = {
    "C12/15": { "IIIA": 2.03, "IIIB": 2.29, "IIIC": 2.50, "I": 1.82 },
    "C20/25": { "IIIA": 1.98, "IIIB": 2.23, "IIIC": 2.44, "I": 1.69 },
    "C30/37": { "IIIA": 1.85, "IIIB": 2.09, "IIIC": 2.30, "I": 1.57 },
    "C40/50": { "IIIA": 1.74, "IIIB": 1.96, "I": 1.46 },
    "C45/55": { "IIIA": 1.70, "IIIB": 1.90, "IIIC": 2.10, "I": 1.44 },
    "C50/60": { "IIIA": 1.53, "IIIB": 1.75, "I": 1.28 },
    "C55/67": { "IIIA": 1.58, "IIIB": 1.60, "I": 1.38 },
    "C60/76": { "IIIA": 1.52, "IIIB": 1.64, "I": 1.29 },
    "C70/85": { "IIIA": 1.27, "IIIB": 1.37, "I": 1.10 },
    "C80/95": { "IIIA": 1.15, "IIIB": 1.08, "I": 1.04 },
    "C90/105": { "IIIA": 1.08, "IIIB": 1.04, "I": 1.04 }
};

// Global variables
let selectedTools = {};
let calculationResults = {};

// Initialize application
document.addEventListener('DOMContentLoaded', function() {
    updateConnectionTypeOptions();
});

// Tab switching functionality
function showTab(tabName) {
    // Hide all tab contents
    const tabContents = document.querySelectorAll('.tab-content');
    tabContents.forEach(tab => tab.classList.remove('active'));
    
    // Remove active class from all tabs
    const navTabs = document.querySelectorAll('.nav-tab');
    navTabs.forEach(tab => tab.classList.remove('active'));
    
    // Show selected tab
    document.getElementById(tabName).classList.add('active');
    
    // Add active class to clicked tab
    event.target.classList.add('active');
}

// Joint area calculation with proper field visibility
function updateJointArea() {
    const connectionType = document.getElementById('connectionType').value;
    const length = parseFloat(document.getElementById('length').value) || 0;
    const width = parseFloat(document.getElementById('width').value) || 0;
    const height = parseFloat(document.getElementById('height').value) || 0;
    const heightGroup = document.getElementById('heightGroup');
    
    // Show/hide height field based on connection type
    if (connectionType === 'Other') {
        heightGroup.style.display = 'flex';
        // Make height required for Other connections
        document.getElementById('height').required = true;
    } else {
        heightGroup.style.display = 'none';
        // Remove height requirement for non-Other connections
        document.getElementById('height').required = false;
    }
    
    let jointArea = 0;
    
    if (connectionType && length && width) {
        if (connectionType === 'Wall-Wall Horizontal' || connectionType === 'Column-Column') {
            jointArea = length * width;
        } else if (connectionType === 'Other' && height) {
            jointArea = Math.min(length, width) * height;
        }
    }
    
    const display = document.getElementById('jointAreaDisplay');
    const display2 = document.getElementById('jointAreaDisplay2');
    
    if (display) display.textContent = jointArea.toFixed(2) + ' cm²';
    if (display2) display2.textContent = jointArea.toFixed(2) + ' cm²';
    
    // Update reinforcement type when connection type changes
    updateReinforcementType();
    
    return jointArea;
}

// Update reduction factor based on strength class and mortar type
function updateReductionFactor() {
    const strengthClass = document.getElementById('strengthClass').value;
    const mortarType = document.getElementById('mortarType').value;
    
    let reductionFactor = '--';
    
    if (strengthClass && mortarType && reductionFactors[strengthClass] && reductionFactors[strengthClass][mortarType]) {
        reductionFactor = reductionFactors[strengthClass][mortarType];
    }
    
    const display = document.getElementById('reductionFactorDisplay');
    if (display) display.textContent = reductionFactor;
    
    return reductionFactor;
}

// Update connection type options
function updateConnectionTypeOptions() {
    const connectionType = document.getElementById('connectionType');
    if (!connectionType) return;
    
    connectionType.addEventListener('change', function() {
        updateJointArea();
        updateReinforcementType();
    });
}

// Update reinforcement type based on connection type
function updateReinforcementType() {
    const connectionType = document.getElementById('connectionType').value;
    const reinforcementTypeDisplay = document.getElementById('reinforcementTypeDisplay');
    const reinforcementNumberGroup = document.getElementById('reinforcementNumberGroup');
    const reinforcementLengthGroup = document.getElementById('reinforcementLengthGroup');
    const reinforcementOtherLengthGroup = document.getElementById('reinforcementOtherLengthGroup');
    const reinforcementDiameterGroup = document.getElementById('reinforcementDiameterGroup');
    
    if (!reinforcementTypeDisplay) return;
    
    // Hide all groups first
    if (reinforcementNumberGroup) reinforcementNumberGroup.style.display = 'none';
    if (reinforcementLengthGroup) reinforcementLengthGroup.style.display = 'none';
    if (reinforcementOtherLengthGroup) reinforcementOtherLengthGroup.style.display = 'none';
    
    if (connectionType === 'Column-Column') {
        reinforcementTypeDisplay.textContent = 'Number of Reinforcement Bars';
        if (reinforcementNumberGroup) reinforcementNumberGroup.style.display = 'flex';
        if (reinforcementDiameterGroup) reinforcementDiameterGroup.style.display = 'flex';
    } else if (connectionType === 'Wall-Wall Horizontal') {
        reinforcementTypeDisplay.textContent = 'Length of Reinforcement';
        if (reinforcementLengthGroup) reinforcementLengthGroup.style.display = 'flex';
        if (reinforcementDiameterGroup) reinforcementDiameterGroup.style.display = 'flex';
    } else if (connectionType === 'Other') {
        reinforcementTypeDisplay.textContent = 'Length and Number of Reinforcement';
        if (reinforcementNumberGroup) reinforcementNumberGroup.style.display = 'flex';
        if (reinforcementOtherLengthGroup) reinforcementOtherLengthGroup.style.display = 'flex';
        if (reinforcementDiameterGroup) reinforcementDiameterGroup.style.display = 'flex';
    } else {
        reinforcementTypeDisplay.textContent = '--';
        if (reinforcementDiameterGroup) reinforcementDiameterGroup.style.display = 'none';
    }
    
    // Recalculate reinforcement area when connection type changes
    calculateReinforcementArea();
}

// Calculate reinforcement area based on connection type and inputs
function calculateReinforcementArea() {
    const connectionType = document.getElementById('connectionType').value;
    const diameter = parseFloat(document.getElementById('reinforcementDiameter').value) || 8;
    const noWaste = document.getElementById('noReinforcementWaste').checked;
    const reinforcementAreaDisplay = document.getElementById('reinforcementAreaDisplay');
    
    if (!reinforcementAreaDisplay) return 0;
    
    if (noWaste) {
        reinforcementAreaDisplay.textContent = '0 cm² (No waste)';
        return 0;
    }
    
    let reinforcementArea = 0;
    
    if (connectionType === 'Column-Column') {
        // Formula: π × diameter² / 4 × number of reinforcement
        const numberOfBars = parseFloat(document.getElementById('reinforcementNumber').value) || 0;
        if (numberOfBars > 0) {
            // Convert diameter from mm to cm for area calculation
            const diameterCm = diameter / 10;
            reinforcementArea = Math.PI * Math.pow(diameterCm, 2) / 4 * numberOfBars;
        }
    } else if (connectionType === 'Wall-Wall Horizontal') {
        // Formula: π × diameter² / 4 × number of reinforcement (assuming 1 bar per length)
        const length = parseFloat(document.getElementById('reinforcementLength').value) || 0;
        if (length > 0) {
            // Convert diameter from mm to cm
            const diameterCm = diameter / 10;
            // For wall connections, we calculate based on length and assume cross-sectional area
            reinforcementArea = Math.PI * Math.pow(diameterCm, 2) / 4;
        }
    } else if (connectionType === 'Other') {
        // Formula: Length × number of reinforcement × diameter
        const length = parseFloat(document.getElementById('reinforcementOtherLength').value) || 0;
        const numberOfBars = parseFloat(document.getElementById('reinforcementNumber').value) || 0;
        if (length > 0 && numberOfBars > 0) {
            // Convert diameter from mm to cm
            const diameterCm = diameter / 10;
            reinforcementArea = length * numberOfBars * diameterCm;
        }
    }
    
    reinforcementAreaDisplay.textContent = reinforcementArea.toFixed(2) + ' cm²';
    return reinforcementArea;
}

// Toggle no waste option
function toggleNoWaste() {
    const noWaste = document.getElementById('noReinforcementWaste').checked;
    const connectionType = document.getElementById('connectionType').value;
    
    // Disable/enable input fields based on no waste selection
    const reinforcementNumber = document.getElementById('reinforcementNumber');
    const reinforcementLength = document.getElementById('reinforcementLength');
    const reinforcementOtherLength = document.getElementById('reinforcementOtherLength');
    const reinforcementDiameter = document.getElementById('reinforcementDiameter');
    
    if (reinforcementNumber) reinforcementNumber.disabled = noWaste;
    if (reinforcementLength) reinforcementLength.disabled = noWaste;
    if (reinforcementOtherLength) reinforcementOtherLength.disabled = noWaste;
    if (reinforcementDiameter) reinforcementDiameter.disabled = noWaste;
    
    // Recalculate area
    calculateReinforcementArea();
}

// Calculate End of Cycle Waste Score
function calculateEndOfCycleWaste() {
    try {
        const jointArea = updateJointArea();
        const wasteArea = parseFloat(document.getElementById('wasteArea').value) || 0;
        const reductionFactor = updateReductionFactor();
        const reinforcementArea = calculateReinforcementArea();
        
        if (!jointArea || wasteArea < 0 || reductionFactor === '--') {
            alert('Please fill in all required fields correctly');
            return;
        }
        
        // Reinforcement reduction factor (from PDF table)
        const reinforcementReductionFactor = 0.21;
        
        // Calculate score using the formula: 1 - (wasteArea/reductionFactor/jointArea + reinforcementArea/jointArea/reinforcementReductionFactor)
        const materialWasteComponent = (wasteArea / reductionFactor) / jointArea;
        const reinforcementWasteComponent = (reinforcementArea / jointArea) / reinforcementReductionFactor;
        
        const score = Math.max(0, Math.min(1, 1 - (materialWasteComponent + reinforcementWasteComponent)));
        
        // Store result
        calculationResults.endOfCycleWaste = score;
        
        // Display results
        const resultDiv = document.getElementById('endOfCycleResult');
        const scoreDiv = document.getElementById('endOfCycleScore');
        const detailsDiv = document.getElementById('endOfCycleDetails');
        
        resultDiv.classList.remove('hidden');
        scoreDiv.innerHTML = `Score: <span style="color: ${getRatingColor(score)}">${(score * 100).toFixed(1)}%</span>`;
        
        detailsDiv.innerHTML = `
            <div><strong>Calculation Details:</strong></div>
            <div>Joint Area: ${jointArea.toFixed(2)} cm²</div>
            <div>Material Waste Area: ${wasteArea.toFixed(2)} cm²</div>
            <div>Reinforcement Waste Area: ${reinforcementArea.toFixed(2)} cm²</div>
            <div>Material Reduction Factor: ${reductionFactor}</div>
            <div>Reinforcement Reduction Factor: ${reinforcementReductionFactor}</div>
            <div style="margin-top: 15px;"><strong>Formula:</strong></div>
            <div>Score = 1 - (Material Waste Component + Reinforcement Waste Component)</div>
            <div style="margin-top: 10px;"><strong>Material Waste Component:</strong></div>
            <div>(${wasteArea.toFixed(2)} / ${reductionFactor}) / ${jointArea.toFixed(2)} = ${materialWasteComponent.toFixed(6)}</div>
            <div style="margin-top: 10px;"><strong>Reinforcement Waste Component:</strong></div>
            <div>(${reinforcementArea.toFixed(2)} / ${jointArea.toFixed(2)}) / ${reinforcementReductionFactor} = ${reinforcementWasteComponent.toFixed(6)}</div>
            <div style="margin-top: 10px;"><strong>Final Score:</strong></div>
            <div>Score = 1 - (${materialWasteComponent.toFixed(6)} + ${reinforcementWasteComponent.toFixed(6)}) = ${score.toFixed(4)}</div>
            <div style="margin-top: 10px; font-style: italic; color: rgba(255,255,255,0.8);">
                Note: Formula follows PDF specification with separate reduction factors for material and reinforcement.
            </div>
        `;
        
        resultDiv.scrollIntoView({ behavior: 'smooth' });
        
    } catch (error) {
        console.error('Error calculating end of cycle waste:', error);
        alert('Error in calculation. Please check your inputs.');
    }
}

// Calculate Prefabrication Degree Score
function calculatePrefabricationDegree() {
    try {
        const jointArea = updateJointArea();
        const prefabricatedArea = parseFloat(document.getElementById('prefabricatedArea').value) || 0;
        
        if (!jointArea || prefabricatedArea < 0) {
            alert('Please fill in all required fields correctly');
            return;
        }
        
        const score = Math.max(0, Math.min(1, prefabricatedArea / jointArea));
        
        // Store result
        calculationResults.prefabricationDegree = score;
        
        // Display results
        const resultDiv = document.getElementById('prefabricationResult');
        const scoreDiv = document.getElementById('prefabricationScore');
        const detailsDiv = document.getElementById('prefabricationDetails');
        
        resultDiv.classList.remove('hidden');
        scoreDiv.innerHTML = `Score: <span style="color: ${getRatingColor(score)}">${(score * 100).toFixed(1)}%</span>`;
        
        detailsDiv.innerHTML = `
            <div><strong>Calculation Details:</strong></div>
            <div>Joint Area: ${jointArea.toFixed(2)} cm²</div>
            <div>Prefabricated Area: ${prefabricatedArea.toFixed(2)} cm²</div>
            <div>Formula: Prefabricated Area / Joint Area</div>
            <div>Score = ${prefabricatedArea.toFixed(2)} / ${jointArea.toFixed(2)} = ${score.toFixed(4)}</div>
        `;
        
        resultDiv.scrollIntoView({ behavior: 'smooth' });
        
    } catch (error) {
        console.error('Error calculating prefabrication degree:', error);
        alert('Error in calculation. Please check your inputs.');
    }
}

// Get rating color based on score
function getRatingColor(score) {
    if (score >= 0.75) return "#4CAF50";  // Green
    if (score >= 0.5) return "#FFC107";   // Yellow
    if (score >= 0.25) return "#FF9800";  // Orange
    return "#F44336";                     // Red
}

// Make functions globally accessible
window.showTab = showTab;
window.updateJointArea = updateJointArea;
window.updateReductionFactor = updateReductionFactor;
window.calculateReinforcementArea = calculateReinforcementArea;
window.toggleNoWaste = toggleNoWaste;
window.calculateEndOfCycleWaste = calculateEndOfCycleWaste;
window.calculatePrefabricationDegree = calculatePrefabricationDegree;

// Console logging for debugging
console.log('Construction Reusability Calculator loaded successfully');
console.log('Available tools:', Object.keys(toolProperties));
console.log('Reduction factors loaded:', Object.keys(reductionFactors));
    </script>
</body>
</html>
